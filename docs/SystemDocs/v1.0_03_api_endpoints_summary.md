## Complete SaaS Trading Platform API Endpoints

## üöÄ Argo Trading Engine API (178.156.194.174:8000)

### Signals Endpoints (`/api/signals`)
- **GET `/api/signals`** - Get all signals with pagination and filtering
  - Query params: `limit`, `offset`, `premium_only`, `symbol`, `action`
  - Returns: Paginated list of signals
- **GET `/api/signals/{signal_id}`** - Get signal by ID
- **GET `/api/signals/latest`** - Get latest signals (array format)
  - Query params: `limit`, `premium_only`
- **GET `/api/signals/stats`** - Get signal statistics

### Backtest Endpoints (`/api/backtest`)
- **POST `/api/backtest`** - Create new backtest
  - Body: `BacktestConfig` (symbol, dates, capital, strategy, risk)
- **GET `/api/backtest/{backtest_id}`** - Get backtest result
- **GET `/api/backtest/{backtest_id}/metrics`** - Get detailed backtest metrics

### Performance Endpoints (`/api/performance`)
- **GET `/api/performance/win-rate`** - Get win rate statistics
  - Query params: `period` (all, 1d, 7d, 30d, 90d, 1y), `symbol`
- **GET `/api/performance/roi`** - Get ROI statistics
  - Query params: `period`, `initial_capital`
- **GET `/api/performance/equity-curve`** - Get equity curve data
  - Query params: `period`, `initial_capital`

### Symbols Endpoints (`/api/symbols`)
- **GET `/api/symbols`** - Get all available symbols
  - Query params: `type`, `exchange`
- **GET `/api/symbols/{symbol}`** - Get current data for symbol
- **GET `/api/symbols/{symbol}/history`** - Get historical price data
  - Query params: `timeframe` (1h, 4h, 1d, 1w, 1m), `limit`

### Health Endpoints (`/api/health`)
- **GET `/api/health`** - Get health status
- **GET `/api/health/metrics`** - Get health metrics
- **GET `/api/health/uptime`** - Get service uptime
- **GET `/api/health/prometheus`** - Get Prometheus metrics (raw)

---

## üîê Alpine Backend API (91.98.153.49:8001)

### Authentication Endpoints (`/api/auth`)
- **POST `/api/auth/signup`** - Create new user account
  - Body: `email`, `password`, `full_name`
  - Returns: Access token + user info
- **POST `/api/auth/login`** - Login and get access token
  - Form data: `username` (email), `password`
  - Returns: Access token + user info
- **POST `/api/auth/logout`** - Logout and revoke token
  - Headers: `Authorization: Bearer <token>`
- **GET `/api/auth/me`** - Get current user information
  - Headers: `Authorization: Bearer <token>`

### User Endpoints (`/api/users`)
- **GET `/api/users/profile`** - Get user profile
  - Headers: `Authorization: Bearer <token>`
- **PUT `/api/users/profile`** - Update user profile
  - Body: `full_name`, `email` (optional)
  - Headers: `Authorization: Bearer <token>`
- **DELETE `/api/users/account`** - Delete user account
  - Body: `password` (confirmation required)
  - Headers: `Authorization: Bearer <token>`

### Subscription Endpoints (`/api/subscriptions`)
- **GET `/api/subscriptions/plan`** - Get current subscription plan
  - Headers: `Authorization: Bearer <token>`
- **POST `/api/subscriptions/upgrade`** - Upgrade subscription
  - Body: `tier` (starter, pro, elite)
  - Headers: `Authorization: Bearer <token>`
  - Returns: Stripe checkout URL
- **GET `/api/subscriptions/invoices`** - Get subscription invoices
  - Query params: `limit`, `offset`
  - Headers: `Authorization: Bearer <token>`

### Signals Endpoints (`/api/signals`)
- **GET `/api/signals/subscribed`** - Get subscribed signals (based on tier)
  - Query params: `limit`, `offset`, `premium_only`
  - Headers: `Authorization: Bearer <token>`
- **GET `/api/signals/history`** - Get signal history
  - Query params: `limit`, `days`
  - Headers: `Authorization: Bearer <token>`
- **GET `/api/signals/export`** - Export signals to CSV/JSON
  - Query params: `format` (csv, json), `days`
  - Headers: `Authorization: Bearer <token>`

### Notifications Endpoints (`/api/notifications`)
- **GET `/api/notifications/unread`** - Get unread notifications
  - Query params: `limit`, `offset`
  - Headers: `Authorization: Bearer <token>`
- **POST `/api/notifications/read`** - Mark notifications as read
  - Body: `notification_ids` (array)
  - Headers: `Authorization: Bearer <token>`
- **DELETE `/api/notifications/{notification_id}`** - Delete notification
  - Headers: `Authorization: Bearer <token>`

### Admin Endpoints (`/api/admin`) - Admin Only
- **GET `/api/admin/analytics`** - Get platform analytics
  - Headers: `Authorization: Bearer <token>` (admin required)
- **GET `/api/admin/users`** - Get all users
  - Query params: `limit`, `offset`, `tier`, `is_active`
  - Headers: `Authorization: Bearer <token>` (admin required)
- **GET `/api/admin/revenue`** - Get revenue statistics
  - Headers: `Authorization: Bearer <token>` (admin required)

---

## üîí Security Features

### Rate Limiting
- **100 requests per minute** per user/IP
- Returns `429 Too Many Requests` when exceeded
- Applied to all endpoints

### Authentication
- **Argo**: HMAC authentication (optional)
  - Format: `Authorization: HMAC <timestamp>:<signature>`
- **Alpine**: JWT Bearer tokens
  - Format: `Authorization: Bearer <token>`
  - Token expiration: 24 hours (configurable)

### Error Handling
All endpoints return proper HTTP status codes:
- `200` - Success
- `201` - Created
- `400` - Bad Request
- `401` - Unauthorized
- `403` - Forbidden
- `404` - Not Found
- `429` - Rate Limit Exceeded
- `500` - Internal Server Error
- `503` - Service Unavailable

---

## üìä Pagination

All list endpoints support pagination:
- `limit` - Number of items per page (1-100)
- `offset` - Number of items to skip
- Response includes: `total`, `limit`, `offset`, `has_more`

---

## üìù Request/Response Examples

### Example: Get Latest Signals (Argo)
```bash
curl -X GET "http://178.156.194.174:8000/api/signals/latest?limit=5&premium_only=true"
```text

### Example: Login (Alpine)
```bash
curl -X POST "http://91.98.153.49:8001/api/auth/login" \
     -H "Content-Type: application/x-www-form-urlencoded" \
     -d "username=user@example.com&password=SecurePass123!"
```text

### Example: Get Subscribed Signals (Alpine)
```bash
curl -X GET "http://91.98.153.49:8001/api/signals/subscribed?limit=10" \
     -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```text

---

## üéØ Next Steps

1. **Test all endpoints** using the examples above
2. **Configure environment variables** for production
3. **Set up database** for persistent storage
4. **Configure Stripe** with real API keys
5. **Set up Redis** for rate limiting and caching
6. **Add monitoring** and logging
7. **Deploy to production** servers

---

## üìö Documentation

- Interactive API docs available at:
  - Argo: `http://178.156.194.174:8000/docs`
  - Alpine: `http://91.98.153.49:8001/docs`

All endpoints include detailed request/response schemas and examples in the OpenAPI documentation.

